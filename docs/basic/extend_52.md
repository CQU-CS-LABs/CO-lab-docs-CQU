# 扩展到52条指令

## 8条逻辑运算指令 

![sram_soc_1](../img/extend52_1.png)

#### 立即数ANDI ORI XORI LUI

- ##### 指令功能

  - ANDI ORI XORI：寄存器 rs 中的值与 0 扩展至 32 位的立即数 imm 按位逻辑运算，结果写入寄存器 rt 中。
  - LUI：将 16 位立即数 imm 写入寄存器 rt 的高 16 位，寄存器 rt 的低 16 位置 0。 

- ##### 数据通路调整

  - 重点处理imm为0扩展至 32 位，其余功能数据通路已实现（推荐方法②，较为规范）
    1. 方法①：可以在ALU计算中将有符号扩展的结果修改为无符号的扩展，即`{ {16{1'b0}} ,num2[15:0]} `
    2. 方法②：修改原有符号扩展模块为数据扩展模块，判断为立即数时在此模块中无符号扩展`{ {16{1'b0}} ,num2[15:0]} `，有符号扩展保持不变

  - *注意：*无符号有符号扩展对LUI指令都无影响，其只需要低16位的值，在ALU做处理即可

- ##### 控制信号调整

  - 关注立即数时寄存器堆的写数据的选择信号
  - 关注alu的输入的第二个数据为扩展模块结果

#### 普通逻辑运算 AND OR XOR NOR

- ##### 指令功能

  - 寄存器 rs 中的值与寄存器 rt 中的值按位逻辑运算，结果写入寄存器 rd 中。 

- ##### 数据通路调整

  - 数据通路与计组Lab4相同，无需调整

- ##### 控制信号调整

  - 数据通路与计组Lab4相同，无需调整

## 6条移位运算指令

![sram_soc_1](../img/extend52_2.png)

##### 立即数移位运算 SLL SRL SRA

- ##### 指令功能

  - SLL SRL:由立即数 sa 指定移位量，对寄存器 rt 的值进行逻辑移位，结果写入寄存器 rd 中。 
  - SRA：由立即数 sa 指定移位量，对寄存器 rt 的值进行算术右移（即左边补上符号位），结果写入寄存器 rd 中。

- ##### 数据通路调整

  - 新增sa信号，从指令的[10:6]位直接连入ALU中

- ##### 控制信号调整

  - 数据通路与计组Lab4相同，无需调整

##### 变量移位运算SLLV SRLV SRAV

- ##### 指令功能

  - 由寄存器 rs 中的值指定移位量，对寄存器 rt 的值进行逻辑移位，结果写入寄存器 rd 中。 

- ##### 数据通路调整

  - 数据通路与计组Lab4相同，无需调整

- ##### 控制信号调整

  - 数据通路与计组Lab4相同，无需调整

